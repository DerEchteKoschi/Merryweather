{% extends 'base.html.twig' %}

{% block title %}Slotbuchung{% endblock %}

{% block body %}

        <div>
            {% if dists|length < 1 %}
                Im Moment is keine Verteilung geplant
            {% else %}
                {% for dist in dists %}
                    <h5 class="container">
                        {{ dist.text }}
                    </h5>
                    <div class="list-group">
                        {% for slot in dist.slots %}
                            {% if slot.user.id != null %}
                                {% if canCancel(app.user, slot) %}
                                    {{ include('slot_booking/cancel.html.twig',{link:path('app_slot_cancel' , {slotId: slot.id})}) }}
                                {% elseif slot.user.id is same as(app.user.id) %}
                                    {{ include('slot_booking/slot.html.twig', {type:'secondary disabled', text: slot.text, link:'#', button: 'outline-secondary', action: 'Du'}) }}
                                {% else %}
                                    {{ include('slot_booking/slot.html.twig', {type:'secondary disabled', text: slot.text, link:'#', button: 'outline-dark', action: slot.user.displayName }) }}
                                {% endif %}
                            {% elseif canBook(app.user, slot) %}
                                {{ include('slot_booking/slot.html.twig', {type:'success', text: slot.text, link:path('app_slot_book' , {slotId: slot.id}), button: 'success', action:'Buchen'}) }}
                            {% else %}
                                {{ include('slot_booking/slot.html.twig', {type:'secondary disabled', text: slot.text, link:'#', button: 'outline-secondary', action: 'N.V.'}) }}
                            {% endif %}
                            {#% if app.environment != 'prod' %}
                                <pre class="list-group-item">{{ dump(slot) }}   </pre>
                            {% endif %#}
                        {% endfor %}
                    </div>
                {% endfor %}
            {% endif %}
        </div>

{% endblock %}
